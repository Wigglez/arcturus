<HBProfile creator="Wigglez" version="1.0">
	<Name>[QO-N][MOUNT]_Wigglez_the-vortex-pinnacle</Name>
   
	<MinLevel>90</MinLevel>
	<MaxLevel>101</MaxLevel>
   
	<MinDurability>-1</MinDurability>
	<MinFreeBagSlots>-1</MinFreeBagSlots>
	
	<MailGrey>False</MailGrey>
	<MailWhite>False</MailWhite>
	<MailGreen>False</MailGreen>
	<MailBlue>False</MailBlue>
	<MailPurple>False</MailPurple>
   
	<SellGrey>True</SellGrey>
	<SellWhite>True</SellWhite>
	<SellGreen>True</SellGreen>
	<SellBlue>True</SellBlue>
	<SellPurple>False</SellPurple>
   
	<TargetElites>True</TargetElites>
	
	<AvoidMobs>	
		<Mob Name="Summon Enabler Stalker" Entry="53488" />
		<Mob Name="Lurking Tempest" Entry="45704" />
	</AvoidMobs>
	
	<Blackspots>
	</Blackspots>

	<Mailboxes>
	</Mailboxes>
 
	<Vendors>
	</Vendors>
	
	<ProtectedItems>
		<Item Name="Reins of the Drake of the North Wind" Entry="63040" />	
	</ProtectedItems>

	<Factions>
	</Factions>
	
	<QuestOrder>
		<ClearVendor />
		<ClearMailbox />

		<CustomBehavior File="UserSettings"
						AdvancedSettingsMode="True"
						FindMountAutomatically="True"
						FindVendorsAutomatically="False"
						GroundMountFarmingMode="False"
						HarvestHerbs="False"
						HarvestMinerals="False"
						KillBetweenHotspots="True"
						LogoutForInactivity="False"
						LogoutInactivityUseForceQuit="False"
						LootChests="False"
						LootMobs="False"
						LootRadius="1"
						MountDistance="75"
						MountName=""
						NinjaSkin="False"
						ProfileDebuggingMode="False"
						PullDistance="25"
						RessAtSpiritHealers="False"
						SkinMobs="False"
						UseFlightPaths="True"
						UseMount="True" 
						UseRandomMount="False" />
							
		<!-- Infinite loop -->
		<While Condition="true" >
			<!-- If we are inside The Vortex Pinnacle -->
			<If Condition="Me.MapId == 657">
				<CustomBehavior File="Message" 
								Text="The Vortex Pinnacle detected. Running out."
								LogColor="Cyan" />
								
				<RunTo X="-337.627" Y="15.3073" Z="626.979" />
				
				<!-- Go through the portal -->
				<CustomBehavior File="Misc\InInstance" X="-328.1064" Y="24.69568" Z="626.979" />
				
				<!-- Make sure we run to the right spot outside the portal -->
				<RunTo X="-11513.3" Y="-2309.88" Z="608.393" />
			</If> <!-- The Vortex Pinnacle -->
		
			<!-- If we are not in the box, load the movement profile -->
			<If Condition="Me.X &lt; -11563 || Me.X &gt; -11463 || Me.Y &lt; -2359 || Me.Y &gt; -2259" >
				<CustomBehavior File="Message" 
								Text="Distance from portal is not within our proximity, initializing movement to get there."
								LogColor="Cyan" />	
								
				<CustomBehavior File="LoadProfile" 
								ProfileName="Movement\[QO-N-M][MOUNT]_Wigglez_the-vortex-pinnacle" />
			</If> <!-- Not in box -->
			
			<!-- If we are in the box -->
			<If Condition="Me.X &gt; -11563 &amp;&amp; Me.X &lt; -11463 &amp;&amp; Me.Y &gt; -2359 &amp;&amp; Me.Y &lt; -2259" >
				<!-- Do repair check and bag check -->
				<If Condition="(Me.LowestDurabilityPercent &lt; 0.3) || (Me.FreeBagSlots &lt; 25)" >
					<CustomBehavior File="Message" 
									Text="Vendoring or repairing is necessary. Switching to movement." 
									LogColor="Cyan" />
									
					<CustomBehavior File="LoadProfile" 
									ProfileName="Movement\[QO-N-M][MOUNT]_Wigglez_the-vortex-pinnacle" />
				</If> <!-- Repair/sell -->
				
				<CustomBehavior File="RunMacro" Macro="/script SetDungeonDifficultyID(1);" />
			
				<CustomBehavior File="Message" 
								Text="Portal detected nearby."
								LogColor="Cyan" />	
					
				<!-- If we didn't enter the instance, wait 20 seconds then attempt to enter again -->
				<While Condition="Me.MapId != 657">
					<!-- Make sure we run to the right spot outside the portal -->
					<RunTo X="-11513.3" Y="-2309.88" Z="608.393" />

					<!-- Run back in the portal -->
					<CustomBehavior File="Misc\InInstance" X="-11522.07" Y="-2317.075" Z="608.393" />
									
					<CustomBehavior File="Message" 
									Text="Waiting for the dungeon to load." 
									LogColor="Cyan" />
								
					<CustomBehavior File="WaitTimer" 
									WaitTime="20000"
									VariantTime="20000" />
									
					<!-- If we still aren't in, we're locked out -->
					<If Condition="Me.MapId != 657">
						<CustomBehavior File="Message" 
										Text="We are locked out. Waiting and trying again." 
										LogColor="Cyan" />
					</If> <!-- Locked -->
				</While> <!-- While we aren't in the instance -->
			</If> <!-- In box -->
			
			<!-- If we are inside and have checked our reset -->
			<If Condition="Me.MapId == 657">
				<!-- Entrance -->
				<RunTo X="-337.627" Y="15.3073" Z="626.979" />
				
				<CustomBehavior File="Misc\InstanceTimer" Timer="Start" /> 
				
				<CustomBehavior File="Message" 
								Text="The Vortex Pinnacle initialized."  
								LogColor="Cyan" />
				
				<!-- Kill first pack -->
				<RunTo X="-418.155" Y="-65.0139" Z="634.4308" />
				
				<!-- Kill patrolling bridge pack -->
				<RunTo X="-490.4752" Y="-137.8968" Z="638.8183" />
				
				<!-- Start killing down the spiral -->
				<RunTo X="-503.8759" Y="-194.8334" Z="637.4194" />
				
				<RunTo X="-527.4366" Y="-213.9935" Z="632.6685" />
				
				<RunTo X="-565.9558" Y="-190.569" Z="625.5085" />
				
				<!-- Kill before the bridge -->
				<RunTo X="-598.0862" Y="-132.7821" Z="619.7554" />
				<RunTo X="-584.1996" Y="-120.3757" Z="619.758" />
				
				<!-- Make sure we are lined up to prepare for a runlikehell myctm -->
				<RunTo X="-597.2778" Y="-118.1437" Z="619.7469" />
				
				<!-- Cross the bridge, bringing pack up next to the boss -->
				<CustomBehavior File="RunLikeHell" 
								UseCTM="true" 
								NumOfTimes="1" 
								AllowCombat="false">
					<Hotspot X="-640.3663" Y="-74.62282" Z="619.7435" />
					<Hotspot X="-652.8657" Y="-47.76516" Z="619.7396" />			
					<Hotspot X="-670.8211" Y="-44.61586" Z="621.056" />
					<Hotspot X="-689.3717" Y="-26.68271" Z="635.6461" />
					<Hotspot X="-687.9952" Y="-16.34932" Z="635.6719" />
					<Hotspot X="-683.4972" Y="-1.890409" Z="635.6719" />
				</CustomBehavior>
				
				<!-- Forces kill of Grand Vizier Ertan -->
				<CustomBehavior File="GetOutOfGroundEffectAndAuras" 
								EventCompleteWhen="SpecificMobsDead" EventCompleteDeadMobId="43878"
								EventX="-719.587" EventY="4.32986" EventZ="635.6728"
								MoveOutOfGroundEffectAuraId1="111111"
								MoveAwayFromMobCastingSpellId1="111111"
								MoveAwayFromMobWithAuraId1="111111">
					<Safespots>
						<Hotspot X="-719.587" Y="4.32986" Z="635.6728" />
					</Safespots>
				</CustomBehavior>
				
				<!-- Move to the Slipstream -->
				<RunTo X="-769.5535" Y="-54.04873" Z="639.9261" />
				
				<!-- Hop into the Slipstream -->
				<CustomBehavior File="MountVehOnly" 
								VehicleMountId="45455" 
								X="-768.213" Y="-53.6862" Z="639.926" />
					
				<!-- Ensure we used the Slipstream and we are where we should be -->
				<RunTo X="-906.08" Y="-176.514" Z="664.5053" />
				
				<!-- Pull Turbulent Squall pack -->
				<RunTo X="-939.155" Y="-143.243" Z="670.1412" />
				
				<!-- Pull Empyrean Assassins -->
				<RunTo X="-946.7415" Y="-79.86347" Z="693.9385" />
				<RunTo X="-992.9962" Y="-61.40604" Z="694.9169" />
				
				<!-- Line ourselves up -->
				<RunTo X="-977.6198" Y="-69.65757" Z="694.9169" />
				
				<!-- Run like hell so we can get the dragon out of the healing well -->
				<CustomBehavior File="RunLikeHell" 
								UseCTM="true" 
								NumOfTimes="1" 
								AllowCombat="false">
					<Hotspot X="-981.7454" Y="-118.2017" Z="694.9169" />
					<Hotspot X="-973.624" Y="-151.4894" Z="694.9169" />
					<Hotspot X="-962.2985" Y="-114.6476" Z="694.9169" />
				</CustomBehavior>
				
				<!-- Run to the center -->
				<RunTo X="-990.6769" Y="-119.6469" Z="694.9169" />

				<!-- Disable combat -->
				<DisableBehavior Name="Combat" />
				
				<!-- Get ready to attack the first Howling Gale -->
				<RunTo X="-1039.599" Y="-69.87095" Z="700.4934" />
				
				<!-- Target the first Howling Gale -->
				<CustomBehavior File="RunMacro" 
								Macro="/target Howling Gale" 
								NumOfTimes="1" />
								
				<!-- Make sure we inflict some damage -->
				<CustomBehavior File="RunMacro" 
								Macro="/cast Moonfire \n/cast Icy Touch \n/cast Serpent Sting \n/cast Ice Lance \n/cast Spinning Fire Blossom \n/cast Judgment \n/cast Shadow Word: Pain \n/cast Throw \n/cast Earth Shock \n/cast Corruption" 
								NumOfTimes="1" />
								
				<!-- Clear the first Howling Gale -->
				<CustomBehavior File="RunMacro" 
								Macro="/cleartarget" 
								NumOfTimes="1" />	
						
				<!-- Walk to the middle of the bridge -->
				<CustomBehavior File="NoCombatMoveTo" X="-1060.336" Y="-49.29886" Z="700.4821" />
				
				<!-- Target the second Howling Gale -->				
				<CustomBehavior File="RunMacro" 
								Macro="/targetenemy" 
								NumOfTimes="1" />
								
				<!-- Make sure we inflict some damage -->
				<CustomBehavior File="RunMacro" 
								Macro="/cast Moonfire \n/cast Icy Touch \n/cast Serpent Sting \n/cast Ice Lance \n/cast Spinning Fire Blossom \n/cast Judgment \n/cast Shadow Word: Pain \n/cast Throw \n/cast Earth Shock \n/cast Corruption" 
								NumOfTimes="1" />	
								
				<!-- Clear the second Howling Gale -->
				<CustomBehavior File="RunMacro" 
								Macro="/cleartarget" 
								NumOfTimes="1" />				
							
				<!-- Move up to the stairs -->
				<CustomBehavior File="NoCombatMoveTo" X="-1092.468" Y="-17.16922" Z="703.9626" />
				
				<!-- Enable combat -->
				<EnableBehavior Name="Combat" />	

				<!-- Run like hell so we can get the dragon out of the healing well -->
				<CustomBehavior File="RunLikeHell" 
								UseCTM="true" 
								NumOfTimes="1" 
								AllowCombat="false">
					<Hotspot X="-1136.267" Y="30.07935" Z="704.7338" />
					<Hotspot X="-1138.296" Y="63.11119" Z="704.7324" />
					<Hotspot X="-1123.25" Y="71.36475" Z="704.7324" />
				</CustomBehavior>
				
				<!-- Kill Turbulent Squall pack -->
				<RunTo X="-1167.22" Y="52.3872" Z="707.7203" />
				
				<!-- Forces kill of Altairus -->
				<CustomBehavior File="GetOutOfGroundEffectAndAuras" 
								EventCompleteWhen="SpecificMobsDead" EventCompleteDeadMobId="43873"
								EventX="-1192.2" EventY="54.16493" EventZ="744.2991"
								MoveOutOfGroundEffectAuraId1="111111"
								MoveAwayFromMobCastingSpellId1="111111"
								MoveAwayFromMobWithAuraId1="111111">
					<Safespots>
						<Hotspot X="-1192.2" Y="54.16493" Z="744.2991" />
					</Safespots>
				</CustomBehavior>
				
				<CustomBehavior File="InteractWith" InteractByLooting="true" MobId="43873" NumOfTimes="1" />
          
				<!-- We are done, go reset -->
				<CustomBehavior File="Message" 
								Text="The Vortex Pinnacle detected. Running out to reset."
								LogColor="Cyan" />
						
				<!-- Move to the Slipstream -->
				<RunTo X="-1196.893" Y="110.9113" Z="740.7072" />

				<!-- Hop into the Slipstream -->
				<CustomBehavior File="MountVehOnly" 
								VehicleMountId="45455" 
								X="-1190.88" Y="125.203" Z="737.6243" />
								
				<!-- Ensure we used the Slipstream and we are where we should be -->				
				<RunTo X="-1193.67" Y="472.835" Z="634.7823" />

				<!-- Run to the edge to jump off -->
				<RunTo X="-1203.691" Y="464.8203" Z="632.9116" />
				
				<!-- Jump off edge -->
				<CustomBehavior File="MyCTM" X="-1198.43" Y="448.135" Z="637.9943" />
				
				<!-- We should now be near the entrance -->
				<RunTo X="-361.0677" Y="-5.696181" Z="632.7807" />
				
				<!-- Stand at portal -->
				<RunTo X="-337.627" Y="15.3073" Z="626.979" />
				
				<CustomBehavior File="Misc\InstanceTimer" Timer="Check" />  
				
				<!-- Go through the portal -->
				<CustomBehavior File="Misc\InInstance" X="-328.1064" Y="24.69568" Z="626.979" />
				
				<!-- Make sure we run to the right spot outside the portal -->
				<RunTo X="-11513.3" Y="-2309.88" Z="608.393" />
			</If> <!-- The Vortex Pinnacle -->
			
			<!-- If we are in the box -->
			<If Condition="Me.X &gt; -11563 &amp;&amp; Me.X &lt; -11463 &amp;&amp; Me.Y &gt; -2359 &amp;&amp; Me.Y &lt; -2259" >
				<CustomBehavior File="Message" 
								Text="Resetting instance." 
								LogColor="Cyan" />
				
				<CustomBehavior File="RunMacro" Macro="/script ResetInstances()" />
				<CustomBehavior File="RunMacro" Macro="/script SetDungeonDifficultyID(1);" />
				
				<CustomBehavior File="Message" 
								Text="Instance reset." 
								LogColor="Cyan" />
			</If> <!-- In box -->
		</While> <!-- Infinite loop -->
	</QuestOrder>
</HBProfile>

