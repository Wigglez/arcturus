<HBProfile creator="Wigglez" version="1.0">
	<Name>[QO-N][MOUNT]_Wigglez_master's-terrace</Name>
   
	<MinLevel>80</MinLevel>
	<MaxLevel>101</MaxLevel>
   
	<MinDurability>-1</MinDurability>
	<MinFreeBagSlots>-1</MinFreeBagSlots>
	
	<MailGrey>False</MailGrey>
	<MailWhite>False</MailWhite>
	<MailGreen>False</MailGreen>
	<MailBlue>False</MailBlue>
	<MailPurple>False</MailPurple>
   
	<SellGrey>True</SellGrey>
	<SellWhite>True</SellWhite>
	<SellGreen>True</SellGreen>
	<SellBlue>True</SellBlue>
	<SellPurple>False</SellPurple>
   
	<TargetElites>True</TargetElites>
	
	<AvoidMobs>	
		<Mob Name="Summon Enabler Stalker" Entry="53488" />
	</AvoidMobs>
	
	<Blackspots>
	</Blackspots>

	<Mailboxes>
	</Mailboxes>
 
	<Vendors>
	</Vendors>
	
	<ProtectedItems>
		<Item Name="Swift White Hawkstrider" Entry="35513" />	
	</ProtectedItems>

	<Factions>
	</Factions>
	
	<QuestOrder>
		<ClearVendor />
		<ClearMailbox />

		<CustomBehavior File="UserSettings"
						AdvancedSettingsMode="True"
						FindMountAutomatically="True"
						FindVendorsAutomatically="False"
						GroundMountFarmingMode="False"
						HarvestHerbs="False"
						HarvestMinerals="False"
						KillBetweenHotspots="True"
						LogoutForInactivity="False"
						LogoutInactivityUseForceQuit="False"
						LootChests="False"
						LootMobs="False"
						LootRadius="1"
						MountDistance="75"
						MountName=""
						NinjaSkin="False"
						ProfileDebuggingMode="False"
						PullDistance="25"
						RessAtSpiritHealers="False"
						SkinMobs="False"
						UseFlightPaths="True"
						UseMount="True" 
						UseRandomMount="False" />
							
		
		<!-- If we are inside Magister's Terrace -->
		<If Condition="Me.MapId == 585">
			<CustomBehavior File="Message" 
							Text="Magister's Terrace detected. Running out."
							LogColor="Cyan" />
							
			<RunTo X="7.52409" Y="0.545139" Z="-2.79914" />
			
			<!-- Go through the portal -->
			<CustomBehavior File="Misc\InInstance" X="-5.403812" Y="0.443591" Z="-2.80351" />
			
			<!-- Make sure we run to the right spot outside the portal -->
			<RunTo X="12885.3" Y="-7336.42" Z="65.4882" />
		</If> <!-- Magister's Terrace -->
	
		<!-- If we are not in the box, load the movement profile -->
		<If Condition="Me.X &lt; 12830 || Me.X &gt; 12930 || Me.Y &lt; -7380 || Me.Y &gt; -7280" >
			<CustomBehavior File="Message" 
							Text="Distance from portal is not within our proximity, initializing movement to get there."
							LogColor="Cyan" />	
							
			<CustomBehavior File="LoadProfile" 
							ProfileName="Movement\[QO-N-M][MOUNT]_Wigglez_magister's-terrace" />
		</If> <!-- Not in box -->
		
		<!-- If we are in the box -->
		<If Condition="Me.X &gt; 12830 &amp;&amp; Me.X &lt; 12930 &amp;&amp; Me.Y &gt; -7380 &amp;&amp; Me.Y &lt; -7280" >
			<CustomBehavior File="RunMacro" Macro="/script SetDungeonDifficultyID(2);" />
		
			<CustomBehavior File="Message" 
							Text="Portal detected nearby."
							LogColor="Cyan" />	
				
			<!-- If we didn't enter the instance, wait 20 seconds then attempt to enter again -->
			<While Condition="Me.MapId != 585">
				<!-- Make sure we run to the right spot outside the portal -->
				<RunTo X="12885.3" Y="-7336.42" Z="65.4882" />

				<!-- Run back in the portal -->
				<CustomBehavior File="Misc\InInstance" X="12882.01" Y="-7342.79" Z="65.52793" />
								
				<CustomBehavior File="Message" 
								Text="Waiting for the dungeon to load." 
								LogColor="Cyan" />
							
				<CustomBehavior File="WaitTimer" 
								WaitTime="20000"
								VariantTime="20000" />
								
				<!-- If we still aren't in, we're locked out -->
				<If Condition="Me.MapId != 585">
					<CustomBehavior File="Message" 
									Text="We are locked out. Waiting and trying again." 
									LogColor="Cyan" />
				</If> <!-- Locked -->
			</While> <!-- While we aren't in the instance -->
		</If> <!-- In box -->
		
		<!-- If we are inside and have checked our reset -->
		<If Condition="Me.MapId == 585">
			<!-- Entrance -->
			<RunTo X="7.52409" Y="0.545139" Z="-2.79914" />
			
			<CustomBehavior File="Message" 
							Text="Magister's Terrace initialized."  
							LogColor="Cyan" />
							
			<!-- Get to Selin Fireheart -->
			<RunTo X="217.1335" Y="0.2777451" Z="-2.820602" />
			
			<!-- Forces kill of Selin Fireheart -->
			<CustomBehavior File="GetOutOfGroundEffectAndAuras" 
							EventCompleteWhen="SpecificMobsDead" EventCompleteDeadMobId="24723"
							EventX="242.0751" EventY="0.300781" EventZ="1.756563"
							MoveOutOfGroundEffectAuraId1="111111"
							MoveAwayFromMobCastingSpellId1="111111"
							MoveAwayFromMobWithAuraId1="111111">
				<Safespots>
					<Hotspot X="242.0751" Y="0.300781" Z="1.756563" />
				</Safespots>
			</CustomBehavior>
			
			<!-- Prepare to run like hell -->
			<RunTo X="254.5287" Y="-26.12566" Z="1.754635" />
			
			<CustomBehavior File="RunLikeHell" 
							UseCTM="false"
							NumOfTimes="1"
							AllowCombat="false">	
				<Hotspot X="254.8201" Y="-76.73869" Z="-6.039458" />
				<Hotspot X="231.3146" Y="-75.74433" Z="-6.034728" />
				<Hotspot X="231.5604" Y="-109.8672" Z="-9.283666" />
				<Hotspot X="231.79" Y="-191.8135" Z="-9.530077" />
			</CustomBehavior>
			
			<!-- Forces kill of Vexallus -->
			<CustomBehavior File="GetOutOfGroundEffectAndAuras" 
							EventCompleteWhen="SpecificMobsDead" EventCompleteDeadMobId="24744"
							EventX="231.3668" EventY="-214.3461" EventZ="-6.406592"
							MoveOutOfGroundEffectAuraId1="111111"
							MoveAwayFromMobCastingSpellId1="111111"
							MoveAwayFromMobWithAuraId1="111111">
				<Safespots>
					<Hotspot X="231.3668" Y="-214.3461" Z="-6.406592" />
				</Safespots>
			</CustomBehavior>
			
			<!-- Get to Priestess Delrissa -->
			<RunTo X="126.9158" Y="-14.40052" Z="-20.0064" />
			
			<!-- Forces kill of Priestess Delrissa -->
			<CustomBehavior File="GetOutOfGroundEffectAndAuras" 
							EventCompleteWhen="SpecificMobsDead" EventCompleteDeadMobId="24560"
							EventX="126.9013" EventY="19.15473" EventZ="-20.00489"
							MoveOutOfGroundEffectAuraId1="111111"
							MoveAwayFromMobCastingSpellId1="111111"
							MoveAwayFromMobWithAuraId1="111111">
				<Safespots>
					<Hotspot X="126.9013" Y="19.15473" Z="-20.00489" />
				</Safespots>
			</CustomBehavior>
			
			<!-- Make sure the bosses are dead -->
			<RunTo X="126.9013" Y="19.15473" Z="-20.00489" />
			
			<!-- Get to Kael'thas Sunstrider -->
			<RunTo X="149.2687" Y="153.6541" Z="-14.38129" />
			
			<!-- Forces kill of Kael'thas Sunstrider -->
			<CustomBehavior File="GetOutOfGroundEffectAndAuras" 
							EventCompleteWhen="SpecificMobsDead" EventCompleteDeadMobId="24664"
							EventX="148.5494" EventY="186.9807" EventZ="-16.72742"
							MoveOutOfGroundEffectAuraId1="111111"
							MoveAwayFromMobCastingSpellId1="111111"
							MoveAwayFromMobWithAuraId1="111111">
				<Safespots>
					<Hotspot X="148.5494" Y="186.9807" Z="-16.72742" />
				</Safespots>
			</CustomBehavior>
			
			<CustomBehavior File="InteractWith" 
							InteractByLooting="true" 
							MobId="24664" 
							NumOfTimes="1" />
	  
			<!-- We are done, go reset -->
			<CustomBehavior File="Message" 
							Text="Magister's Terrace cleared. Using teleporter to leave."
							LogColor="Cyan" />
					
			<!-- Get to the teleporter -->
			<RunTo X="148.3846" Y="199.0214" Z="-11.95794" />
					
			<CustomBehavior File="InteractWith" 
							MobId="188173"
							ObjectType="Gameobject"
							Range="4.75" 
							NumOfTimes="1"		
							X="148.400711" Y="203.442932" Z="-11.957921" />
		</If> <!-- Magister's Terrace -->
	</QuestOrder>
</HBProfile>

