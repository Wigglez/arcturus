<HBProfile creator="Wigglez" version="1.0">
	<Name>[QO-N][MOUNT]_Wigglez_the-stonecore</Name>
   
	<MinLevel>90</MinLevel>
	<MaxLevel>101</MaxLevel>
   
	<MinDurability>-1</MinDurability>
	<MinFreeBagSlots>-1</MinFreeBagSlots>
	
	<MailGrey>False</MailGrey>
	<MailWhite>False</MailWhite>
	<MailGreen>False</MailGreen>
	<MailBlue>False</MailBlue>
	<MailPurple>False</MailPurple>
   
	<SellGrey>True</SellGrey>
	<SellWhite>True</SellWhite>
	<SellGreen>True</SellGreen>
	<SellBlue>True</SellBlue>
	<SellPurple>False</SellPurple>
   
	<TargetElites>True</TargetElites>
	
	<AvoidMobs>	
		<Mob Name="Summon Enabler Stalker" Entry="53488" />
	</AvoidMobs>
	
	<Blackspots>
	</Blackspots>

	<Mailboxes>
	</Mailboxes>
 
	<Vendors>
	</Vendors>
	
	<ProtectedItems>
		<Item Name="Reins of the Vitreous Stone Drake" Entry="63043" />	
	</ProtectedItems>

	<Factions>
	</Factions>
	
	<QuestOrder>
		<ClearVendor />
		<ClearMailbox />

		<CustomBehavior File="UserSettings"
						AdvancedSettingsMode="True"
						FindMountAutomatically="True"
						FindVendorsAutomatically="False"
						GroundMountFarmingMode="False"
						HarvestHerbs="False"
						HarvestMinerals="False"
						KillBetweenHotspots="True"
						LogoutForInactivity="False"
						LogoutInactivityUseForceQuit="False"
						LootChests="False"
						LootMobs="True"
						LootRadius="1"
						MountDistance="75"
						MountName=""
						NinjaSkin="False"
						ProfileDebuggingMode="False"
						PullDistance="25"
						RessAtSpiritHealers="False"
						SkinMobs="False"
						UseFlightPaths="True"
						UseMount="True" 
						UseRandomMount="False" />
							
		<!-- Infinite loop -->
		<While Condition="true" >
			<!-- If we are inside The Stonecore -->
			<If Condition="Me.MapId == 725">
				<CustomBehavior File="Message" 
								Text="The Stonecore detected. Running out."
								LogColor="Cyan" />
								
				<RunTo X="851.052" Y="986.474" Z="317.266" />

				<!-- Go through the portal -->
				<CustomBehavior File="Misc\InInstance" X="822.7013" Y="986.6689" Z="318.9152" />
				
				<!-- Make sure we run to the right spot outside the portal -->
				<RunTo X="1023.72" Y="644.747" Z="156.672" />
			</If> <!-- The Stonecore -->
		
			<!-- If we are not in the box, load the movement profile -->
			<If Condition="Me.X &lt; 973 || Me.X &gt; 1073 || Me.Y &lt; 594 || Me.Y &gt; 694" >
				<CustomBehavior File="Message" 
								Text="Distance from portal is not within our proximity, initializing movement to get there."
								LogColor="Cyan" />	
								
				<CustomBehavior File="LoadProfile" 
								ProfileName="Movement\[QO-N-M][MOUNT]_Wigglez_the-stonecore" />
			</If> <!-- Not in box -->
			
			<!-- If we are in the box -->
			<If Condition="Me.X &gt; 973 &amp;&amp; Me.X &lt; 1073 &amp;&amp; Me.Y &gt; 594 &amp;&amp; Me.Y &lt; 694" >
				<!-- Do repair check and bag check -->
				<If Condition="(Me.LowestDurabilityPercent &lt; 0.3) || (Me.FreeBagSlots &lt; 25)" >
					<CustomBehavior File="Message" 
									Text="Vendoring or repairing is necessary. Switching to movement." 
									LogColor="Cyan" />
									
					<CustomBehavior File="LoadProfile" 
									ProfileName="Movement\[QO-N-M][MOUNT]_Wigglez_the-stonecore" />
				</If> <!-- Repair/sell -->
				
				<CustomBehavior File="RunMacro" Macro="/script SetDungeonDifficultyID(1);" />
			
				<CustomBehavior File="Message" 
								Text="Portal detected nearby."
								LogColor="Cyan" />	
					
				<!-- If we didn't enter the instance, wait 20 seconds then attempt to enter again -->
				<While Condition="Me.MapId != 725">
					<!-- Make sure we run to the right spot outside the portal -->
					<RunTo X="1023.72" Y="644.747" Z="156.672" />

					<!-- Run back in the portal -->
					<CustomBehavior File="Misc\InInstance" X="1029.226" Y="617.2282" Z="154.2685" />
									
					<CustomBehavior File="Message" 
									Text="Waiting for the dungeon to load." 
									LogColor="Cyan" />
								
					<CustomBehavior File="WaitTimer" 
									WaitTime="20000"
									VariantTime="20000" />
									
					<!-- If we still aren't in, we're locked out -->
					<If Condition="Me.MapId != 725">
						<CustomBehavior File="Message" 
										Text="We are locked out. Waiting and trying again." 
										LogColor="Cyan" />
					</If> <!-- Locked -->
				</While> <!-- While we aren't in the instance -->
			</If> <!-- In box -->
			
			<!-- If we are inside and have checked our reset -->
			<If Condition="Me.MapId == 725">
				<!-- Entrance -->
				<RunTo X="851.052" Y="986.474" Z="317.266" />
				
				<CustomBehavior File="Misc\InstanceTimer" Timer="Start" /> 
				
				<CustomBehavior File="Message" 
								Text="The Stonecore initialized."  
								LogColor="Cyan" />
				
				<!-- Kill first Millhouse pack -->
				<RunTo X="903.255" Y="985.352" Z="317.1154" />
				
				<!-- Kill second Millhouse pack -->
				<RunTo X="980.774" Y="891.762" Z="305.2962" />
				
				<!-- Kill third Millhouse pack -->
				<RunTo X="1054.68" Y="866.424" Z="294.1293" />
				
				<!-- Run to beginning of Slabhide's ramp -->
				<RunTo X="1183.574" Y="1088.031" Z="263.9543" />
				
				<!-- Run to end of Slabhide's ramp -->
				<RunTo X="1253.741" Y="1201.844" Z="247.2789" />
				
				<!-- Forces kill of Slabhide -->
				<CustomBehavior File="GetOutOfGroundEffectAndAuras" 
								EventCompleteWhen="SpecificMobsDead" EventCompleteDeadMobId="43214"
								EventX="1292.352" EventY="1226.478" EventZ="247.6368"
								MoveOutOfGroundEffectAuraId1="111111"
								MoveAwayFromMobCastingSpellId1="111111"
								MoveAwayFromMobWithAuraId1="111111">
					<Safespots>
						<Hotspot X="1292.352" Y="1226.478" Z="247.6368" />
					</Safespots>
				</CustomBehavior>
				
				<CustomBehavior File="InteractWith" 
								InteractByLooting="true" 
								MobId="43214" 
								NumOfTimes="1" />
				
				<!-- We are done, go reset -->
				<CustomBehavior File="Message" 
								Text="The Stonecore detected. Running out to reset."
								LogColor="Cyan" />
								
				<!-- Use Stonecore Teleporter -->
				<CustomBehavior File="InteractWith" 
								MobId="51397" 
								NumOfTimes="1" />
				
				<!-- Stand at portal -->
				<RunTo X="851.052" Y="986.474" Z="317.266" />
				
				<CustomBehavior File="Misc\InstanceTimer" Timer="Check" />  
				
				<!-- Go through the portal -->
				<CustomBehavior File="Misc\InInstance" X="822.7013" Y="986.6689" Z="318.9152" />
				
				<!-- Make sure we run to the right spot outside the portal -->
				<RunTo X="1023.72" Y="644.747" Z="156.672" />
			</If> <!-- The Stonecore -->
			
			<!-- If we are in the box -->
			<If Condition="Me.X &gt; 973 &amp;&amp; Me.X &lt; 1073 &amp;&amp; Me.Y &gt; 594 &amp;&amp; Me.Y &lt; 694" >
				<CustomBehavior File="Message" 
								Text="Resetting instance." 
								LogColor="Cyan" />
				
				<CustomBehavior File="RunMacro" Macro="/script ResetInstances()" />
				<CustomBehavior File="RunMacro" Macro="/script SetDungeonDifficultyID(1);" />
				
				<CustomBehavior File="Message" 
								Text="Instance reset." 
								LogColor="Cyan" />
			</If> <!-- In box -->
		</While> <!-- Infinite loop -->
	</QuestOrder>
</HBProfile>

